{% extends 'base_lecdashboard.html' %}
{% block title %}Exam Violations{% endblock %}
{% block breadcrumb %}Examination > Violations{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/useredit.css') }}">
<h2 style="margin-left: 20px;">Exam Violations</h2>
<hr>

<table class="studentList">
  <thead>
    <tr>
      <th>Assessment</th>
      <th>Student</th>
      <th>Violation Type</th>
      <th>Description</th>
      <th>Time</th>
      <th>Evidence</th>
    </tr>
  </thead>
  <tbody>
    {% for v in violations %}
    <tr>
      <td>{{ v.assessment_code }}</td>
      <td>{{ v.student_name }} ({{ v.student_id }})</td>
      <td>{{ v.violation_type }}</td>
      <td>{{ v.description }}</td>
      <td>{{ v.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td>
      <td>
        {% if v.evidence %}
          {% for file in v.evidence.files %}
            {% if file.type == 'screenshot' %}
              <a href="{{ url_for('static', filename='evidence/screenshots/' ~ file.filename) }}" target="_blank">ðŸ“· Screenshot</a><br>
            {% elif file.type == 'video' %}
              <a href="{{ url_for('static', filename='evidence/videos/' ~ file.filename) }}" target="_blank">ðŸŽ¥ Video</a><br>
            {% endif %}
          {% endfor %}
        {% else %}
          No evidence
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
