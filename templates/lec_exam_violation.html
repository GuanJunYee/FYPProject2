{% extends 'base_lecdashboard.html' %}
{% block title %}Exam Violations{% endblock %}
{% block breadcrumb %}Examinations > Exam Violations{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/useredit.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/violations.css') }}">

<h2 style="margin-left: 20px;">Violations for {{ assessment_code }} - {{ assessment.title if assessment }}</h2>
<hr>
<a href="{{ url_for('lecturer_violation_assessments') }}" class="btn-reset" style="float: left; margin-top: 10px; margin-bottom: 15px;">‚Üê Back</a>
  
{% if violations %}
<div style="margin-top: 20px;">
  <table class="studentList">
    <thead>
      <tr>
        <th>Assessment</th>
        <th>Student</th>
        <th>Violation Type</th>
        <th>Description</th>
        <th>Time</th>
        <th>Evidence</th>
      </tr>
    </thead>
    <tbody>
      {% for v in violations %}
      <tr class="violation-row-enhanced">
        <td>{{ v.assessment_code }}</td>
        <td>
          <div class="student-info">
            <div class="student-name-enhanced">{{ v.student_name }}</div>
            <div class="student-id-enhanced">({{ v.student_id }})</div>
          </div>
        </td>
        <td>
          <div class="violation-type-display">{{ v.violation_type }}</div>
        </td>
        <td>{{ v.description }}</td>
        <td>
          <div class="time-display">
            <div class="time-main">{{ v.timestamp.strftime('%H:%M:%S') }}</div>
            <div class="time-date">{{ v.timestamp.strftime('%Y-%m-%d') }}</div>
          </div>
        </td>
        <td>
          {% if v.evidence %}
            <div class="evidence-links-enhanced">
              {% for file in v.evidence.files %}
                {% if file.type == 'screenshot' %}
                  <a href="{{ url_for('static', filename='evidence/screenshots/' ~ file.filename) }}" target="_blank" class="evidence-link-enhanced screenshot">
                    üì∑ Screenshot
                  </a>
                {% elif file.type == 'video' %}
                  <a href="{{ url_for('static', filename='evidence/videos/' ~ file.filename) }}" target="_blank" class="evidence-link-enhanced video">
                    üé• Video
                  </a>
                {% endif %}
              {% endfor %}
            </div>
          {% else %}
            <span class="no-evidence-enhanced">No evidence</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="no-violations-enhanced">
  <div class="no-violations-icon">‚úÖ</div>
  <h3>No Violations Found</h3>
  <p>This assessment was completed without any detected violations.</p>
</div>
{% endif %}
{% endblock %}