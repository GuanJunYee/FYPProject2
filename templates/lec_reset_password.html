{% extends 'base_lecdashboard.html' %}
{% block title %}Reset Password{% endblock %}
{% block breadcrumb %}Reset Password{% endblock %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/reset_password.css') }}">
<script src="{{ url_for('static', filename='js/auth.js') }}"></script>
<script>
  // Auto-hide error messages after 5 seconds
  document.addEventListener("DOMContentLoaded", function () {
    setTimeout(() => {
      document.querySelectorAll(".error").forEach(el => {
        el.style.transition = "opacity 0.5s ease-out";
        el.style.opacity = "0";
        setTimeout(() => el.remove(), 500);  // remove from DOM
      });
    }, 5000);
  });
</script>

<div style="margin: 20px;">
  <div class="profile-header">
    <h1 style="padding-left:20px;">Set Password</h1>
    <hr />
  </div>

  <div style="border: 1px solid #ddd; padding: 20px; background-color: #f9f9f9; border-radius: 8px;">
    <h2>Password Rules</h2>
    <ul>
      <li>A minimum of 1 lowercase alphabet character</li>
      <li>A minimum of 1 uppercase case alphabet character</li>
      <li>A minimum of 1 numeric character [0-9]</li>
      <li>A minimum of 1 special character (symbol)</li>
      <li>Passwords must be at least 8 characters in length</li>
    </ul>
  </div>

  <form method="POST" action="{{ url_for('lec_reset_password') }}">
    <div class="setPass" style="margin-top: 1%;">
      <table style="width: 100%;">
        <tr>
          <td style="width: 178px;">Current Password</td>
          <td style="position: relative;">
            <input type="password" name="current_password" id="current_password" placeholder="Enter Current Password" class="password-field" required>
            <i class="fas fa-eye-slash toggle-password" style="position: absolute; right: 10px; top: 55%; transform: translateY(-50%); cursor: pointer;" onclick="togglePassword('current_password', this)"></i>
            {% if errors.current_password %}<div class="error">{{ errors.current_password }}</div>{% endif %}
          </td>
        </tr>
        <tr>
          <td>New Password</td>
          <td style="position: relative;">
            <input type="password" name="new_password" id="new_password" placeholder="Enter New Password" class="password-field" required>
            <i class="fas fa-eye-slash toggle-password" style="position: absolute; right: 10px; top: 55%; transform: translateY(-50%); cursor: pointer;" onclick="togglePassword('new_password', this)"></i>
            {% if errors.new_password %}<div class="error">{{ errors.new_password }}</div>{% endif %}
          </td>
        </tr>
        <tr>
          <td>Confirm Password</td>
          <td style="position: relative;">
            <input type="password" name="confirm_password" id="confirm_password" placeholder="Enter Confirm Password" class="password-field" required>
            <i class="fas fa-eye-slash toggle-password" style="position: absolute; right: 10px; top: 55%; transform: translateY(-50%); cursor: pointer;" onclick="togglePassword('confirm_password', this)"></i>
            {% if errors.confirm_password %}<div class="error">{{ errors.confirm_password }}</div>{% endif %}
          </td>
        </tr>
      </table>
      <br />
      <a href="{{ url_for('lec_profile') }}" class="btn-reset" style="text-decoration: none;">Cancel</a>
      <button type="submit" class="btn-save">Save Changes</button>
    </div>
  </form>
</div>
{% endblock %}
