{% extends 'base_dashboard.html' %}

{% block title %}Set Password{% endblock %}
{% block breadcrumb %}Set Password{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/reset_password.css') }}">
<script src="{{ url_for('static', filename='js/auth.js') }}"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    setTimeout(function () {
      const flashErrors = document.querySelectorAll(".flash-error");
      flashErrors.forEach(el => {
        el.style.transition = "opacity 0.5s ease";
        el.style.opacity = "0";
        setTimeout(() => el.remove(), 500);  // Optional: remove from DOM after fade
      });
    }, 5000); // 5 seconds
  });
</script>

<div style="margin: 20px;">
    <div class="profile-header">
        <h1 style="padding-left:20px;">Set Password</h1>
        <hr />
    </div>

    <div style="border: 1px solid #ddd; padding: 20px; background-color: #f9f9f9; border-radius: 8px;">
        <h2>Password Requirements</h2>
        <ul>
            <li>A minimum of 1 lowercase alphabet character</li>
            <li>A minimum of 1 uppercase case alphabet character</li>
            <li>A minimum of 1 numeric character [0-9]</li>
            <li>A minimum of 1 special character (symbol)</li>
            <li>Passwords must be at least 8 characters in length</li>
        </ul>
    </div>

    <form method="POST" action="{{ url_for('reset_password') }}">
        <div class="setPass" style="margin-top: 1%;">
            <table style="width: 100%;">
                <tr>
                    <td style="width: 178px; height: 45px;">Current Password</td>
                    <td style="height: 45px;">
                        <div class="password-wrapper">
                            <input type="password" name="current_password" id="current_password" placeholder="Enter Current Password" class="password-field" required>
                            <i class="fas fa-eye-slash toggle-password" style="position: absolute; right: 10px; top: 55%; transform: translateY(-50%); cursor: pointer;" onclick="togglePassword('current_password', this)"></i>
                        </div>
                        {% if errors.current_password %}
                            <div class="error flash-error">{{ errors.current_password }}</div>
                        {% endif %}
                        
                    </td>
                </tr>
                <tr>
                    <td style="width: 178px">New Password</td>
                    <td style="height: 45px;">
                        <div class="password-wrapper">
                            <input type="password" name="new_password" id="new_password" placeholder="Enter New Password" class="password-field" required>
                            <i class="fas fa-eye-slash toggle-password" style="position: absolute; right: 10px; top: 55%; transform: translateY(-50%); cursor: pointer;" onclick="togglePassword('new_password', this)"></i>
                        </div>
                        {% if errors.new_password %}
                            <div class="error flash-error">{{ errors.new_password }}</div>
                        {% endif %}
                    </td>
                </tr>

                <tr>
                    <td style="width: 178px">Confirm Password</td>
                    <td style="height: 45px;">
                        <div class="password-wrapper">
                            <input type="password" name="confirm_password" id="confirm_password" placeholder="Enter Confirm Password" class="password-field" required>
                            <i class="fas fa-eye-slash toggle-password" style="position: absolute; right: 10px; top: 55%; transform: translateY(-50%); cursor: pointer;" onclick="togglePassword('confirm_password', this)"></i>
                        </div>
                            {% if errors.confirm_password %}
                            <div class="error flash-error">{{ errors.confirm_password }}</div>
                        {% endif %}
                    </td>
                </tr>
            </table>

            <br /><br />
            <a href="{{ url_for('profile') }}" class="btn-reset" style="outline: none; text-decoration: none;">Cancel</a>
            <button type="submit" class="btn-save">Save Changes</button>
        </div>
    </form>
</div>
{% endblock %}
