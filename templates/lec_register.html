{% extends 'base_lecdashboard.html' %}
{% block title %}Register New User{% endblock %}
{% block breadcrumb %}User Management > Register User{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/lecregister.css') }}">
<script src="{{ url_for('static', filename='js/auth.js') }}"></script>
<script>
  // Auto-hide error messages after 5 seconds
  document.addEventListener("DOMContentLoaded", function () {
    setTimeout(() => {
      document.querySelectorAll(".error").forEach(el => {
        el.style.transition = "opacity 0.5s ease-out";
        el.style.opacity = "0";
        setTimeout(() => el.remove(), 500);  // remove from DOM
      });
    }, 5000);
  });
</script>

<div class="profile-header">
  <h1 style="padding-left:20px;">Register New User</h1>
  <hr />
</div>

<form method="POST" action="{{ url_for('lec_register') }}">
  <div class="profile-container">
    <div class="profile-details">
      <div class="detail-group">
        <label>User ID:</label>
        <input type="text" name="user_id" placeholder="User ID (7 digits) " class="form-control" required pattern="[0-9]{7}" maxlength="7" title="User ID must be 7 digits." />
        {% if errors.user_id %}
          <div class="error">{{ errors.user_id }}</div>
        {% endif %}
      </div>
      <div class="detail-group">
        <label>Full Name:</label>
        <input type="text" name="name" placeholder="Yee Guan Jun" class="form-control" required />
      </div>
      <div class="detail-group">
        <label>Email:</label>
        <input type="email" name="email" placeholder="abc@gmail.com" class="form-control" required />
        {% if errors.email %}
          <div class="error">{{ errors.email }}</div>
        {% endif %}
      </div>
      <div class="detail-group">
        <label>Phone Number:</label>
        <input type="tel" name="phone" placeholder="012-3456789"  class="form-control" pattern="01[0-9]-[0-9]{7,8}" maxlength="12" title="Phone number must be in the format 01x-xxxxxxxx." required />
      </div>
      <div class="detail-group">
        <label>Gender:</label>
        <select name="gender" class="form-control" required>
          <option value="">-- Select Gender --</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div class="detail-group">
        <label>Role:</label>
        <select name="role" class="form-control" required>
          <option value="">-- Select Role --</option>
          <option value="student">Student</option>
          <option value="lecturer">Lecturer</option>
        </select>
      </div>
      <!-- Password Field -->
      <div class="detail-group password-group">
        <label for="register-password">Password:</label>
        <div class="input-icon">
          <i class="fas fa-lock lock-icon"></i>
          <input type="password" name="password" id="register-password" placeholder="Password"
            required
            pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9])[A-Za-z\d\W]{8,}$"
            title="Password must be at least 8 characters with uppercase, lowercase, number, and special character.">
          <i class="fas fa-eye-slash toggle-password" onclick="togglePassword('register-password', this)"></i>
        </div>
        {% if errors.password %}
          <div class="error">{{ errors.password }}</div>
        {% endif %}
      </div>

      <div class="detail-group password-group">
        <label for="confirm-password">Confirm Password:</label>
        <div class="input-icon">
          <i class="fas fa-lock lock-icon"></i>
          <input type="password" name="confirm_password" id="confirm-password" placeholder="Confirm Password"
            required
            pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9])[A-Za-z\d\W]{8,}$"
            title="Password must be at least 8 characters with uppercase, lowercase, number, and special character.">
          <i class="fas fa-eye-slash toggle-password" onclick="togglePassword('confirm-password', this)"></i>
        </div>
        {% if errors.confirm_password %}
          <div class="error">{{ errors.confirm_password }}</div>
        {% endif %}
      </div>



    </div>
      <div class="form-actions">
  <a href="{{ url_for('lec_register') }}" class="btn-reset">Cancel</a>
  <button type="submit" class="btn-save">Register</button>
</div>

  </div>

  <br />

</form>
{% endblock %}
